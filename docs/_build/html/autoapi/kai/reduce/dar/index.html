
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>kai.reduce.dar &#8212; KAI  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/graphviz.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="kai.reduce.data" href="../data/index.html" />
    <link rel="prev" title="kai.reduce.calibrate" href="../calibrate/index.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-kai.reduce.dar">
<span id="kai-reduce-dar"></span><h1><a class="reference internal" href="#module-kai.reduce.dar" title="kai.reduce.dar"><code class="xref py py-mod docutils literal notranslate"><span class="pre">kai.reduce.dar</span></code></a><a class="headerlink" href="#module-kai.reduce.dar" title="Permalink to this headline">¶</a></h1>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this headline">¶</a></h2>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#kai.reduce.dar.get_atm_conditions" title="kai.reduce.dar.get_atm_conditions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_atm_conditions</span></code></a>(year)</p></td>
<td><p>Retrieve atmospheric conditions from CFHT archive website,</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#kai.reduce.dar.keckDARcoeffs" title="kai.reduce.dar.keckDARcoeffs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">keckDARcoeffs</span></code></a>(lamda, year, month, day, hour, minute)</p></td>
<td><p>Calculate the differential atmospheric refraction</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#kai.reduce.dar.kaidar" title="kai.reduce.dar.kaidar"><code class="xref py py-obj docutils literal notranslate"><span class="pre">kaidar</span></code></a>(fitsFile, instrument=instruments.default_inst)</p></td>
<td><p>Use the FITS header to extract date, time, wavelength,</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#kai.reduce.dar.darPlusDistortion" title="kai.reduce.dar.darPlusDistortion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">darPlusDistortion</span></code></a>(inputFits, outputRoot, xgeoim=None, ygeoim=None, instrument=instruments.default_inst)</p></td>
<td><p>Create lookup tables (stored as FITS files) that can be used</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#kai.reduce.dar.applyDAR" title="kai.reduce.dar.applyDAR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">applyDAR</span></code></a>(inputFits, spaceStarlist, plot=False, instrument=instruments.default_inst, plotdir='./')</p></td>
<td><p>inputFits: (str) name of fits file associated with this starlist</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#kai.reduce.dar.splitAtmosphereCFHT" title="kai.reduce.dar.splitAtmosphereCFHT"><code class="xref py py-obj docutils literal notranslate"><span class="pre">splitAtmosphereCFHT</span></code></a>(year)</p></td>
<td><p>Take an original archive file containing atmospheric parameters and</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#kai.reduce.dar.test_darPlusDistortion" title="kai.reduce.dar.test_darPlusDistortion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">test_darPlusDistortion</span></code></a>()</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#kai.reduce.dar.p2" title="kai.reduce.dar.p2"><code class="xref py py-obj docutils literal notranslate"><span class="pre">p2</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#kai.reduce.dar.module_dir" title="kai.reduce.dar.module_dir"><code class="xref py py-obj docutils literal notranslate"><span class="pre">module_dir</span></code></a></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py data">
<dt class="sig sig-object py" id="kai.reduce.dar.p2">
<span class="sig-prename descclassname"><span class="pre">kai.reduce.dar.</span></span><span class="sig-name descname"><span class="pre">p2</span></span><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="reference internal" href="../../../../_modules/kai/reduce/dar.html#p2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kai.reduce.dar.p2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="kai.reduce.dar.module_dir">
<span class="sig-prename descclassname"><span class="pre">kai.reduce.dar.</span></span><span class="sig-name descname"><span class="pre">module_dir</span></span><a class="reference internal" href="../../../../_modules/kai/reduce/dar.html#module_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kai.reduce.dar.module_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kai.reduce.dar.get_atm_conditions">
<span class="sig-prename descclassname"><span class="pre">kai.reduce.dar.</span></span><span class="sig-name descname"><span class="pre">get_atm_conditions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/kai/reduce/dar.html#get_atm_conditions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kai.reduce.dar.get_atm_conditions" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve atmospheric conditions from CFHT archive website,
then calls dar.splitAtmosphereCFHT() to separate the data
by months.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kai.reduce.dar.keckDARcoeffs">
<span class="sig-prename descclassname"><span class="pre">kai.reduce.dar.</span></span><span class="sig-name descname"><span class="pre">keckDARcoeffs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lamda</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">month</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">day</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minute</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/kai/reduce/dar.html#keckDARcoeffs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kai.reduce.dar.keckDARcoeffs" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the differential atmospheric refraction
for two objects observed at Keck.</p>
<p>Input:
lamda – Effective wavelength (microns) assumed to be the same for both
year, month, day, hour, minute of observation (HST)</p>
<p>Output:
refA
refB</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kai.reduce.dar.kaidar">
<span class="sig-prename descclassname"><span class="pre">kai.reduce.dar.</span></span><span class="sig-name descname"><span class="pre">kaidar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fitsFile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">instruments.default_inst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/kai/reduce/dar.html#kaidar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kai.reduce.dar.kaidar" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the FITS header to extract date, time, wavelength,
elevation, and image orientation information. This is everything
that is necessary to calculate the differential atmospheric
refraction. The differential atmospheric refraction
is applicable only along the zenith direction of an image.
This code calculates the predicted DAR using archived CFHT
atmospheric data and the elevation and wavelength of the observations.
Then the DAR correction is transformed into image coefficients that
can be applied in image coordinates.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kai.reduce.dar.darPlusDistortion">
<span class="sig-prename descclassname"><span class="pre">kai.reduce.dar.</span></span><span class="sig-name descname"><span class="pre">darPlusDistortion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputFits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputRoot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xgeoim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ygeoim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">instruments.default_inst</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/kai/reduce/dar.html#darPlusDistortion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kai.reduce.dar.darPlusDistortion" title="Permalink to this definition">¶</a></dt>
<dd><p>Create lookup tables (stored as FITS files) that can be used
to correct DAR. Optionally, the shifts due to DAR can be added
to existing NIRC2 distortion lookup tables if the xgeoim/ygeoim
input parameters are set.</p>
<p>Inputs:
inputFits - a NIRC2 image for which to determine the DAR correction
outputRoot - the root name for the output. This will be used as the</p>
<blockquote>
<div><p>root name of two new images with names, &lt;outputRoot&gt;_x.fits and
&lt;outputRoot&gt;_y.fits.</p>
</div></blockquote>
<p>Optional Inputs:
xgeoim/ygeoim - FITS images used in Drizzle distortion correction</p>
<blockquote>
<div><p>(lookup tables) will be modified to incorporate the DAR correction.
The order of the correction is 1. distortion, 2. DAR.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kai.reduce.dar.applyDAR">
<span class="sig-prename descclassname"><span class="pre">kai.reduce.dar.</span></span><span class="sig-name descname"><span class="pre">applyDAR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputFits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spaceStarlist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">instruments.default_inst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plotdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/kai/reduce/dar.html#applyDAR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kai.reduce.dar.applyDAR" title="Permalink to this definition">¶</a></dt>
<dd><p>inputFits: (str) name of fits file associated with this starlist</p>
<p>spaceStarlist: (astropy table) must include columns ‘x0’ and ‘y0’.</p>
<p>Input a starlist in x=RA (+x = west) and y=Dec (arcseconds) taken from
space and introduce differential atmospheric refraction (DAR). The amount
of DAR that is applied depends on the header information in the input fits
file. The resulting output starlist should contain what was observed
after the starlight passed through the atmosphere, but before the
starlight passed through the telescope. Only achromatic DAR is
applied in this code.</p>
<p>returns spaceStarlist with updated ‘x0’ and ‘y0’</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kai.reduce.dar.splitAtmosphereCFHT">
<span class="sig-prename descclassname"><span class="pre">kai.reduce.dar.</span></span><span class="sig-name descname"><span class="pre">splitAtmosphereCFHT</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">year</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/kai/reduce/dar.html#splitAtmosphereCFHT"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kai.reduce.dar.splitAtmosphereCFHT" title="Permalink to this definition">¶</a></dt>
<dd><p>Take an original archive file containing atmospheric parameters and
split it up into seperate files for individual months. This makes
later calls to calculate DAR parameters MUCH faster.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kai.reduce.dar.test_darPlusDistortion">
<span class="sig-prename descclassname"><span class="pre">kai.reduce.dar.</span></span><span class="sig-name descname"><span class="pre">test_darPlusDistortion</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/kai/reduce/dar.html#test_darPlusDistortion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kai.reduce.dar.test_darPlusDistortion" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">KAI</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">API Reference</a><ul>
  <li><a href="../../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">kai</span></code></a><ul>
  <li><a href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">kai.reduce</span></code></a><ul>
      <li>Previous: <a href="../calibrate/index.html" title="previous chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">kai.reduce.calibrate</span></code></a></li>
      <li>Next: <a href="../data/index.html" title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">kai.reduce.data</span></code></a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, J. R. Lu, A. K. Gautam, T. Do.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../../_sources/autoapi/kai/reduce/dar/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>